---
const trustMetrics = [
  {
    platform: "Google Reviews",
    rating: 4.9,
    logo: "https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg",
    color: "text-red-500",
    bgColor: "bg-red-50",
  },
  {
    platform: "Trustpilot",
    rating: 4.7,
    logo: "https://cdn.worldvectorlogo.com/logos/trustpilot-2.svg",
    color: "text-green-500",
    bgColor: "bg-green-50",
  },
  {
    platform: "WordPress Repository",
    rating: 4.8,
    logo: "/wordpress-Logo.svg",
    color: "text-blue-600",
    bgColor: "bg-blue-50",
  },
];

function generateStars(rating) {
  const fullStars = Math.floor(rating);
  const hasHalfStar = rating % 1 !== 0;
  const emptyStars = 5 - Math.ceil(rating);

  return {
    full: fullStars,
    half: hasHalfStar,
    empty: emptyStars,
  };
}
---

<section class="py-8 bg-base-50">
  <div class="px-8 mx-auto md:px-12 lg:px-24 max-w-7xl">
    <div class="text-center mb-6">
      <p class="text-sm font-semibold text-base-700 mb-1">
        Trusted by the WordPress community
      </p>
    </div>

    <div
      class="flex flex-col sm:flex-row items-center justify-center gap-6"
    >
      {
        trustMetrics.map((metric) => {
          const stars = generateStars(metric.rating);
          return (
            <div class="flex items-center gap-3 p-3 bg-white rounded-lg shadow-sm border border-base-200">
              <div class={`p-2 rounded-full ${metric.bgColor}`}>
                <img
                  src={metric.logo}
                  alt={metric.platform}
                  class="w-6 h-6"
                  style={
                    metric.platform === "WordPress Repository"
                      ? "filter: hue-rotate(220deg) saturate(2)"
                      : ""
                  }
                />
              </div>
              <div class="text-center">
                <div class="flex items-center gap-1 mb-1">
                  {/* Render full stars */}
                  {Array.from({ length: stars.full }, (_, i) => (
                    <svg
                      key={`full-${i}`}
                      class="w-4 h-4 text-yellow-400 fill-current"
                      viewBox="0 0 20 20"
                    >
                      <path d="M10 1l2.5 6.5h6.5l-5.25 4 2 6.5-5.25-4-5.25 4 2-6.5-5.25-4h6.5z" />
                    </svg>
                  ))}

                  {/* Render half star if needed */}
                  {stars.half && (
                    <svg class="w-4 h-4 text-yellow-400" viewBox="0 0 20 20">
                      <defs>
                        <linearGradient id="half-fill">
                          <stop offset="50%" stop-color="currentColor" />
                          <stop offset="50%" stop-color="#e5e7eb" />
                        </linearGradient>
                      </defs>
                      <path
                        fill="url(#half-fill)"
                        d="M10 1l2.5 6.5h6.5l-5.25 4 2 6.5-5.25-4-5.25 4 2-6.5-5.25-4h6.5z"
                      />
                    </svg>
                  )}

                  {/* Render empty stars */}
                  {Array.from({ length: stars.empty }, (_, i) => (
                    <svg
                      key={`empty-${i}`}
                      class="w-4 h-4 text-base-300 fill-current"
                      viewBox="0 0 20 20"
                    >
                      <path d="M10 1l2.5 6.5h6.5l-5.25 4 2 6.5-5.25-4-5.25 4 2-6.5-5.25-4h6.5z" />
                    </svg>
                  ))}
                </div>

                <div class="text-lg font-bold text-base-900 mb-1">
                  {metric.rating.toFixed(1)}
                </div>

                <div class="text-xs text-base-500 font-medium">
                  {metric.platform}
                </div>
              </div>
            </div>
          );
        })
      }
    </div>

    <div class="text-center mt-6">
      <p class="text-sm text-base-500">
        Used on <span class="font-semibold text-base-700">10k+</span> sites for better form management
      </p>
    </div>
  </div>
</section>
